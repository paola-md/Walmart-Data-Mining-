library(arules)
library(tidyverse)
library(magrittr)
library(readr)
library(purrr)
df <- read_csv('train.csv', col_types = 'ddcdicd') %>%
purrr::set_names(nm = c('visita_tipo','visita_ticket','visita_dia_semana',
'producto_identificador','producto_cantidad',
'producto_departamento','producto_categoria')) %>%
mutate_if(is.character, tolower) %>%
mutate(producto_departamento = ifelse(producto_departamento =='null',NA,
producto_departamento)) %>%
mutate_at(vars(visita_tipo:producto_identificador,
producto_departamento,producto_categoria),
function(x){factor(x, levels = unique(x))})
#MKT BKT
tt <- df %>%
filter(!is.na(producto_identificador)) %>%
sample_n(size = floor(nrow(df)*.01))
lis1 <- split(tt$producto_identificador, tt$visita_ticket)
1+1
trans.1 <- as(lis1, 'list')
df <- read_csv('train.csv', col_types = 'ddcdicd') %>%
purrr::set_names(nm = c('visita_tipo','visita_ticket','visita_dia_semana',
'producto_identificador','producto_cantidad',
'producto_departamento','producto_categoria')) %>%
mutate_if(is.character, tolower) %>%
mutate(producto_departamento = ifelse(producto_departamento =='null',NA,
producto_departamento)) %>%
mutate_at(vars(visita_tipo:producto_identificador,
producto_departamento,producto_categoria),
function(x){factor(x, levels = unique(x))})
library(tidyverse)
library(magrittr)
library(readr)
library(purrr)
df <- read_csv('train.csv', col_types = 'ddcdicd') %>%
purrr::set_names(nm = c('visita_tipo','visita_ticket','visita_dia_semana',
'producto_identificador','producto_cantidad',
'producto_departamento','producto_categoria')) %>%
mutate_if(is.character, tolower) %>%
mutate(producto_departamento = ifelse(producto_departamento =='null',NA,
producto_departamento)) %>%
mutate_at(vars(visita_tipo:producto_identificador,
producto_departamento,producto_categoria),
function(x){factor(x, levels = unique(x))})
df %>% saveRDS('walmart_train.RDS')
read_rds('www/walmart_train.RDS') %>%
# select_if(function(x) is.numeric(x)) %>%
names
